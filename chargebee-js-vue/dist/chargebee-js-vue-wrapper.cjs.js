"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var s=require("vue");function c(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})}function m(e){if(e){const t=e.site,n=e.publishableKey;return!(!(t&&typeof t=="string"&&t.length>0)||!(n&&typeof n=="string"&&n.length>0))}else return!1}const d={props:{fonts:{type:Array,default:()=>[]},classes:{type:Object,default:()=>({})},styles:{type:Object,default:()=>({})},placeholder:{type:Object,default:()=>({})},icon:{type:Boolean,default:!0},locale:{type:String,default:"en"},currency:{type:String,default:"USD"}},data(){return{cbInstance:null,cbComponent:null,moduleLoaded:!1,elementId:""}},computed:{componentOptions:function(){return{fonts:this.fonts,classes:this.classes,locale:this.locale,style:this.styles,placeholder:this.placeholder,icon:this.icon,currency:this.currency}}},methods:{tokenize(e){return this.cbComponent.tokenize(e)},authorizeWith3ds(e,t,n){return this.cbComponent.authorizeWith3ds(e,t,n)},focus(){this.cbComponent.focus()},blur(){this.cbComponent.blur()},clear(){this.cbComponent.clear()},setComponentInstance(e){e&&e.props&&(e.props={...e.props,cbComponent:this.cbComponent}),e.children&&e.children.default&&e.children.default().map(t=>{this.setComponentInstance(t)})}},mounted(){this.$nextTick(()=>{this.elementId=`card-component-${c()}`;let e=Chargebee.getInstance(),t=this.componentOptions;e.load("components").then(()=>{this.cbInstance=e,console.log(t);const n=this.cbInstance.createComponent("card",t);this.cbComponent=n,this.moduleLoaded=!0,console.log(this.cbComponent,this.moduleLoaded),["ready","focus","blur","change"].map(i=>{this.cbComponent.on(i,o=>{this.$emit(i,o)})})})})},updated(){this.cbComponent&&this.moduleLoaded&&this.cbComponent.status==0&&this.$nextTick(()=>{this.cbComponent.mount(`#${this.elementId}`)})},watch:{componentOptions:function(){this.cbComponent&&this.cbComponent.update(this.componentOptions)}},render(){let e;return this.moduleLoaded?this.$slots.default?e=this.$slots.default().map(t=>(this.setComponentInstance(t),t)):e=[]:e=[],s.h("div",{id:this.elementId,class:this.class},e)}},l={data(){return{field:null}},props:{styles:{type:Object,default:()=>({})},placeholder:{type:String,default:()=>""}},computed:{fieldOptions:function(){return{style:this.styles||{},placeholder:this.placeholder}},elementId:function(){return`card-${this.id}-${c()}`}},methods:{getField(){return this.field},attachListener(e){this.field.on(e,t=>{this.$emit(e,t)})},initializeField(e){if(e){const t=this.fieldOptions;this.field=e.createField(this.id,t).at(`#${this.elementId}`),this.$parent.onMount&&this.$parent.onMount(),this.attachListener("ready"),this.attachListener("focus"),this.attachListener("blur"),this.attachListener("change")}},focus(){this.field.focus()},blur(){this.field.blur()},clear(){this.field.clear()}},watch:{cbComponent:function(e,t){this.field||this.initializeField(e)},fieldOptions:function(){if(this.field){const e=this.fieldOptions;this.field.update(e)}}},mounted(){this.initializeField(this.cbComponent)}};var r=(e,t)=>{const n=e.__vccOpts||e;for(const[i,o]of t)n[i]=o;return n};const b={name:"CardNumber",mixins:[l],props:{cbComponent:{type:Object,default:()=>null},styles:{type:Object,default:()=>({})},placeholder:{type:String,default:()=>""}},data(){return{id:"number",loaded:!1,classname:this.class}}},y=["id"];function C(e,t,n,i,o,a){return s.openBlock(),s.createElementBlock("div",{id:e.elementId,class:s.normalizeClass(o.classname)},[s.renderSlot(e.$slots,"default")],10,y)}var p=r(b,[["render",C]]);const x={name:"CardExpiry",props:{cbComponent:{type:Object,default:()=>null},styles:{type:Object,default:()=>({})},placeholder:{type:String,default:()=>""}},data(){return{id:"expiry",loaded:!1,classname:this.class}},mixins:[l]},$=["id"];function _(e,t,n,i,o,a){return s.openBlock(),s.createElementBlock("div",{id:e.elementId,class:s.normalizeClass(o.classname)},[s.renderSlot(e.$slots,"default")],10,$)}var u=r(x,[["render",_]]);const v={name:"CardCvv",props:{cbComponent:{type:Object,default:()=>null},styles:{type:Object,default:()=>({})},placeholder:{type:String,default:()=>""}},data(){return{id:"cvv",loaded:!1,classname:this.class}},mixins:[l]},g=["id"];function O(e,t,n,i,o,a){return s.openBlock(),s.createElementBlock("div",{id:e.elementId,class:s.normalizeClass(o.classname)},[s.renderSlot(e.$slots,"default")],10,g)}var h=r(v,[["render",O]]);const f={name:"Provider",props:{cbInstance:{type:Object,default:null}},render(){return m(this.cbInstance)?this.$slots.default():null}};var I={install(e){e.component("card-component",d),e.component("card-number",p),e.component("card-expiry",u),e.component("card-cvv",h),e.component("provider",f)}};exports.CardComponent=d;exports.CardCvv=h;exports.CardExpiry=u;exports.CardNumber=p;exports.Provider=f;exports.default=I;
//# sourceMappingURL=chargebee-js-vue-wrapper.cjs.js.map
